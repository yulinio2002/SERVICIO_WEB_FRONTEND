{
  "info": {
    "_postman_id": "d0c2a23a-b5ba-4196-8f11-29916ede1356",
    "name": "Oil Backend - Endpoints",
    "description": "Colección generada automáticamente a partir del código fuente (src.zip). Incluye login JWT y CRUDs.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "43499216",
    "_collection_link": "https://go.postman.co/collection/43499216-d0c2a23a-b5ba-4196-8f11-29916ede1356?source=collection_link"
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status 200\", function () { pm.response.to.have.status(200); });",
                  "let json = pm.response.json();",
                  "if (json.token) { pm.collectionVariables.set(\"token\", json.token); }",
                  "pm.test(\"Token guardado en variable\", function(){ pm.expect(pm.collectionVariables.get(\"token\")).to.not.be.empty; });"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@demo.com\",\n  \"password\": \"Admin12345*\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Me (requiere token)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 200\", ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "me"
              ]
            }
          },
          "response": []
        },
        {
          "name": "New users",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"email\": \"test@email.com\",\r\n  \"password\": \"123456\",\r\n  \"direccion\": \"Av. Principal 123\",\r\n  \"persona\": {\r\n    \"nombre\": \"Juan\",\r\n    \"apellido\": \"Pérez\",\r\n    \"telefono\": \"12345678\"\r\n  }\r\n}\r\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "New Request",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth"
              ]
            }
          },
          "response": []
        },
        {
          "name": "New Request",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"email\":\"juanito@gmail.com\",\r\n\"telefono\":\"98765431\"}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/2",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "2"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Empresa",
      "item": [
        {
          "name": "Crear empresa",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 201\", ()=> pm.response.to.have.status(201));",
                  "const json=pm.response.json(); if(json.id){ pm.collectionVariables.set(\"empresaId\", json.id); }"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"ServiMatch\",\n  \"nosotros\": \"Somos una empresa de servicios para el hogar.\",\n  \"mision\": \"Conectar clientes con especialistas.\",\n  \"vision\": \"Ser la plataforma líder en Perú.\",\n  \"direccion\": \"Av. Demo 123, Lima\",\n  \"ruc\": \"20123456789\",\n  \"numeroContacto\": \"+51 999 999 999\",\n  \"url1\": \"https://example.com\",\n  \"url2\": \"https://instagram.com/example\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/empresas",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "empresas"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Listar empresas",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/empresas",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "empresas"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Obtener empresa por ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/empresas/{empresaId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "empresas",
                "{empresaId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Actualizar empresa (campos editables)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"ServiMatch (actualizado)\",\n  \"nosotros\": \"Somos una empresa de servicios para el hogar.\",\n  \"mision\": \"Conectar clientes con especialistas.\",\n  \"vision\": \"Ser la plataforma líder en Perú.\",\n  \"direccion\": \"Av. Demo 123, Lima\",\n  \"ruc\": \"20123456789\",\n  \"numeroContacto\": \"+51 988 888 888\",\n  \"url1\": \"https://example.com\",\n  \"url2\": \"https://instagram.com/example\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/empresas/{empresaId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "empresas",
                "{empresaId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Eliminar empresa",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 204', ()=> pm.response.to.have.status(204));"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/empresas/{empresaId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "empresas",
                "{empresaId}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Marcas",
      "item": [
        {
          "name": "Crear marca",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 201\", ()=> pm.response.to.have.status(201));",
                  "const json=pm.response.json(); if(json.id){ pm.collectionVariables.set(\"marcaId\", json.id); }"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Marca Demo\",\n  \"imagenUrl\": \"https://picsum.photos/seed/marca/600/400\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/marcas",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "marcas"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Listar marcas",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/marcas",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "marcas"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Obtener marca por ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/marcas/{marcaId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "marcas",
                "{marcaId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Actualizar marca",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Marca Demo 2\",\n  \"imagenUrl\": \"https://picsum.photos/seed/marca2/600/400\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/marcas/{marcaId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "marcas",
                "{marcaId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Eliminar marca",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 204', ()=> pm.response.to.have.status(204));"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/marcas/{marcaId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "marcas",
                "{marcaId}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Servicios",
      "item": [
        {
          "name": "Crear servicio",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 201\", ()=> pm.response.to.have.status(201));",
                  "const json=pm.response.json(); if(json.id){ pm.collectionVariables.set(\"servicioId\", json.id); }"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Gasfitería\",\n  \"imagenUrl\": \"https://picsum.photos/seed/servicio/600/400\",\n  \"descripcion\": \"Instalaciones y reparaciones de plomería.\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/servicios",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "servicios"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Listar servicios",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/servicios",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "servicios"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Obtener servicio por ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/servicios/{servicioId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "servicios",
                "{servicioId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Top 5 servicios",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/servicios/top/5",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "servicios",
                "top",
                "5"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Actualizar servicio",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Gasfitería\",\n  \"imagenUrl\": \"https://picsum.photos/seed/servicio/600/400\",\n  \"descripcion\": \"Instalaciones, mantenimiento y reparaciones de plomería.\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/servicios/{servicioId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "servicios",
                "{servicioId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Eliminar servicio",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 204', ()=> pm.response.to.have.status(204));"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/servicios/{servicioId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "servicios",
                "{servicioId}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Proyectos",
      "item": [
        {
          "name": "Crear proyecto",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 201\", ()=> pm.response.to.have.status(201));",
                  "const json=pm.response.json(); if(json.id){ pm.collectionVariables.set(\"proyectoId\", json.id); }"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Proyecto Demo\",\n  \"img_url\": \"https://picsum.photos/seed/proyecto/800/450\",\n  \"descripcion\": \"Proyecto de ejemplo para portafolio.\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/proyectos",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "proyectos"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Listar proyectos",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/proyectos",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "proyectos"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Obtener proyecto por ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/proyectos/{proyectoId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "proyectos",
                "{proyectoId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Top 5 proyectos",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/proyectos/top/5",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "proyectos",
                "top",
                "5"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Actualizar proyecto",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Proyecto Demo (actualizado)\",\n  \"img_url\": \"https://picsum.photos/seed/proyecto/800/450\",\n  \"descripcion\": \"Proyecto de ejemplo para portafolio.\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/proyectos/{proyectoId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "proyectos",
                "{proyectoId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Eliminar proyecto",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 204', ()=> pm.response.to.have.status(204));"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/proyectos/{proyectoId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "proyectos",
                "{proyectoId}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Productos",
      "item": [
        {
          "name": "Crear producto",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 201\", ()=> pm.response.to.have.status(201));",
                  "const json=pm.response.json(); if(json.id){ pm.collectionVariables.set(\"productoId\", json.id); }"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Producto Demo\",\n  \"img_url\": \"https://picsum.photos/seed/producto/600/400\",\n  \"descripcion\": \"Producto de ejemplo.\",\n  \"marca\": \"ACME\",\n  \"categorias\": [\n    \"LIMPIEZA\"\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/productos",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "productos"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Obtener producto por ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/productos/{productoId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "productos",
                "{productoId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Listar productos (sin filtros)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/productos",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "productos"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Listar productos por categoria",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/productos?categoria=LIMPIEZA",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "productos"
              ],
              "query": [
                {
                  "key": "categoria",
                  "value": "LIMPIEZA"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Listar productos por marca",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/productos?marca=ACME",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "productos"
              ],
              "query": [
                {
                  "key": "marca",
                  "value": "ACME"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Top 5 productos",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/productos/top/5",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "productos",
                "top",
                "5"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Actualizar producto",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Producto Demo\",\n  \"img_url\": \"https://picsum.photos/seed/producto/600/400\",\n  \"descripcion\": \"Producto demo actualizado.\",\n  \"marca\": \"ACME\",\n  \"categorias\": [\n    \"LIMPIEZA\",\n    \"PLOMERIA\"\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/productos/{productoId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "productos",
                "{productoId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Eliminar producto",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 204', ()=> pm.response.to.have.status(204));"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/productos/{productoId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "productos",
                "{productoId}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Fotos",
      "item": [
        {
          "name": "Crear foto (requiere servicioId y proyectoId)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status 201\", ()=> pm.response.to.have.status(201));",
                  "const json=pm.response.json(); if(json.id){ pm.collectionVariables.set(\"fotoId\", json.id); }"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"imagenUrl\": \"https://picsum.photos/seed/foto/900/600\",\n  \"servicio\": { \"id\": {{servicioId}} },\n  \"proyectos\": { \"id\": {{proyectoId}} }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/fotos",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "fotos"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Listar fotos",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/fotos",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "fotos"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Obtener foto por ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/fotos/{fotoId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "fotos",
                "{fotoId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Fotos por servicio",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/fotos/servicios/{servicioId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "fotos",
                "servicios",
                "{servicioId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Fotos por proyecto",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/fotos/proyectos/{proyectoId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "fotos",
                "proyectos",
                "{proyectoId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Crear foto para servicio (puede fallar si proyectos es NOT NULL)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status es 201 o 400/500 según constraints', ()=> pm.expect([201,400,500]).to.include(pm.response.code));"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"imagenUrl\": \"https://picsum.photos/seed/foto-serv/900/600\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/fotos/servicios/{servicioId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "fotos",
                "servicios",
                "{servicioId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Crear foto para proyecto (puede fallar si servicio es NOT NULL)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status es 201 o 400/500 según constraints', ()=> pm.expect([201,400,500]).to.include(pm.response.code));"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"imagenUrl\": \"https://picsum.photos/seed/foto-proy/900/600\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/fotos/proyectos/{proyectoId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "fotos",
                "proyectos",
                "{proyectoId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Actualizar foto",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 200', ()=> pm.response.to.have.status(200));"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"imagenUrl\": \"https://picsum.photos/seed/foto-upd/900/600\",\n  \"servicio\": { \"id\": {{servicioId}} },\n  \"proyectos\": { \"id\": {{proyectoId}} }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/fotos/{fotoId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "fotos",
                "{fotoId}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Eliminar foto",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status 204', ()=> pm.response.to.have.status(204));"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/fotos/{fotoId}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "fotos",
                "{fotoId}"
              ]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080"
    },
    {
      "key": "token",
      "value": ""
    },
    {
      "key": "empresaId",
      "value": ""
    },
    {
      "key": "marcaId",
      "value": ""
    },
    {
      "key": "productoId",
      "value": ""
    },
    {
      "key": "servicioId",
      "value": ""
    },
    {
      "key": "proyectoId",
      "value": ""
    },
    {
      "key": "fotoId",
      "value": ""
    }
  ]
}